---

---

<section id="pricing" class="page-section" data-background="tint">
	<div class="container pricing-section">
		<div class="section-header">
			<span class="section-eyebrow">Pricing</span>
			<h2>Contract Pricing for Agents</h2>
			<p class="section-description">
				Inaugurate your department of Consultology
			</p>
		</div>

		<div class="pricing-grid">
			<fluent-card class="pricing-card">
				<h3>Attending</h3>
				<p class="card-meta">
					For specialists leading consult workflow.
				</p>
				<div class="price-display">
					<span class="currency">$</span>
					<span class="amount">250</span>
					<span class="term">/month</span>
				</div>
				<ul>
					<li>Automated referral-to-consult drafting</li>
					<li>Template creation and sharing</li>
					<li>Custom investigations summary</li>
				</ul>
				<fluent-button
					class="select-plan"
					appearance="outline"
					data-plan="Attending"
					data-price="250"
				>
					Hire AI Agent
				</fluent-button>
			</fluent-card>

			<fluent-card class="pricing-card">
				<h3>Resident</h3>
				<p class="card-meta">Designed for teams prepping clinics.</p>
				<div class="price-display">
					<span class="currency">$</span>
					<span class="amount">125</span>
					<span class="term">/month</span>
				</div>
				<ul>
					<li>Customizable patient questionnaire</li>
					<li>Virtual patient onboarding</li>
					<li>Prepare draft pre-visit HPI and assessment plan</li>
				</ul>
				<fluent-button
					class="select-plan"
					appearance="outline"
					data-plan="Resident"
					data-price="125"
				>
					Hire AI Agent
				</fluent-button>
			</fluent-card>

			<fluent-card class="pricing-card">
				<h3>Student</h3>
				<p class="card-meta">
					Ideal for supervised clinical rotations.
				</p>
				<div class="price-display">
					<span class="currency">$</span>
					<span class="amount">75</span>
					<span class="term">/month</span>
				</div>
				<ul>
					<li>Updates HPI during visit</li>
					<li>Summarizes patients' key concerns</li>
					<li>
						Finalizes assessment plan based on your recommendations
					</li>
				</ul>
				<fluent-button
					class="select-plan"
					appearance="outline"
					data-plan="Student"
					data-price="75"
				>
					Hire AI Agent
				</fluent-button>
			</fluent-card>
		</div>

		<div class="pricing-bill" id="pricing-bill" aria-live="polite">
			<h3 class="bill-title">Team Contract</h3>
			<p class="bill-description">
				Select the agents above to build a personalized monthly
				estimate.
			</p>
			<ul class="bill-items" id="pricing-bill-items" role="list" hidden>
			</ul>
			<p class="bill-empty" id="pricing-bill-empty">
				No agents selected yet.
			</p>
			<div class="bill-total">
				<span class="bill-total__label">Total</span>
				<span class="bill-total__amount" id="pricing-total-amount"
					>$0/month</span
				>
			</div>
			<fluent-button
				appearance="accent"
				href="/checkout"
				id="pricing-checkout"
				disabled
				aria-disabled="true"
			>
				Sign Contract
			</fluent-button>
		</div>

		<div class="section-cta">
			<fluent-button appearance="accent" href="/demo"
				>Try it free â€“ save hours this week</fluent-button
			>
			<fluent-button
				appearance="subtle"
				data-scroll-target="#contact"
				href="/#contact">Contact our team</fluent-button
			>
		</div>
	</div>
</section>

<script>
	if (typeof window !== "undefined") {
		const pricingSection = document.getElementById("pricing");

		if (pricingSection) {
			type FluentButtonElement = HTMLElement & { dataset: DOMStringMap };

			interface BillItemDom {
				item: HTMLLIElement;
				price: HTMLSpanElement;
				percent: HTMLSpanElement;
				slider: HTMLInputElement;
				name: HTMLSpanElement;
			}

			interface SelectionEntry {
				planName: string;
				basePrice: number;
				percentage: number;
				button?: FluentButtonElement;
				dom?: BillItemDom;
			}

			const setBaseAppearance = (
				button: FluentButtonElement,
				value: string | null | undefined,
			): void => {
				const appearance = value || "";
				button.dataset.baseAppearance = appearance;
				if (appearance) {
					button.setAttribute("appearance", appearance);
				} else {
					button.removeAttribute("appearance");
				}
			};

			const getBaseAppearance = (button: FluentButtonElement): string => {
				const stored = button.dataset.baseAppearance;
				if (stored && stored.length > 0) {
					return stored;
				}
				const initial = button.dataset.initialAppearance;
				return initial || "";
			};

			const allButtons = Array.from<FluentButtonElement>(
				pricingSection.querySelectorAll("fluent-button"),
			);

			allButtons.forEach((button: FluentButtonElement) => {
				const initialAppearance =
					button.getAttribute("appearance") || "";
				button.dataset.initialAppearance = initialAppearance;
				setBaseAppearance(button, initialAppearance);

				button.addEventListener("pointerenter", () => {
					button.setAttribute("appearance", "accent");
				});

				button.addEventListener("pointerleave", () => {
					setBaseAppearance(button, getBaseAppearance(button));
				});
			});

			const selectButtons = Array.from<FluentButtonElement>(
				pricingSection.querySelectorAll(".select-plan"),
			);
			const selections = new Map<string, SelectionEntry>();
			const billList = document.getElementById("pricing-bill-items");
			const emptyState = document.getElementById("pricing-bill-empty");
			const totalAmount = document.getElementById("pricing-total-amount");
			const checkoutButton = document.getElementById("pricing-checkout");
			const currencyFormatter = new Intl.NumberFormat("en-US", {
				style: "currency",
				currency: "USD",
				minimumFractionDigits: 2,
				maximumFractionDigits: 2,
			});
			const PLAN_ORDER = ["Attending", "Resident", "Student"] as const;
			type PlanName = (typeof PLAN_ORDER)[number];
			const getPlanPriority = (value: string): number => {
				const candidate = PLAN_ORDER.find((plan) => plan === value) as
					| PlanName
					| undefined;
				return candidate
					? PLAN_ORDER.indexOf(candidate)
					: Number.MAX_SAFE_INTEGER;
			};

			const formatCurrency = (amount: number): string => {
				const normalized = Math.round(amount * 100) / 100;
				return currencyFormatter.format(normalized);
			};

			const formatFte = (percentage: number): string =>
				(Number(percentage) / 100).toFixed(2);

			const computeAdjustedAmount = (entry: SelectionEntry): number =>
				(entry.basePrice * entry.percentage) / 100;

			const updateButtonLabel = (entry: SelectionEntry): void => {
				if (entry.button) {
					entry.button.textContent = `${formatFte(
						entry.percentage,
					)} FTE Hired`;
				}
			};

			const syncSummaryState = () => {
				const hasSelections = selections.size > 0;

				if (billList) {
					billList.hidden = !hasSelections;
				}

				if (emptyState) {
					emptyState.hidden = hasSelections;
				}

				if (checkoutButton) {
					if (hasSelections) {
						checkoutButton.removeAttribute("disabled");
						checkoutButton.setAttribute("aria-disabled", "false");
					} else {
						checkoutButton.setAttribute("disabled", "");
						checkoutButton.setAttribute("aria-disabled", "true");
					}
				}
			};

			const updateTotal = () => {
				let total = 0;

				selections.forEach((entry) => {
					total += computeAdjustedAmount(entry);
				});

				if (totalAmount) {
					totalAmount.textContent = `${formatCurrency(total)}/month`;
				}
			};

			const ensureBillItem = (entry: SelectionEntry): void => {
				if (!billList) {
					return;
				}

				let dom = entry.dom;

				if (!dom || !dom.item.isConnected) {
					const item = document.createElement("li");
					item.className = "bill-item";
					item.dataset.plan = entry.planName;

					const row = document.createElement("div");
					row.className = "bill-item__row";

					const name = document.createElement("span");
					name.className = "bill-item__name";

					const price = document.createElement("span");
					price.className = "bill-item__price";

					row.append(name, price);

					const control = document.createElement("div");
					control.className = "bill-item__control";

					const slider = document.createElement("input");
					slider.className = "bill-item__slider";
					slider.type = "range";
					slider.min = "0";
					slider.max = "100";
					slider.step = "1";
					slider.value = entry.percentage.toString();
					slider.setAttribute(
						"aria-label",
						`${entry.planName} utilization percentage`,
					);

					const percent = document.createElement("span");
					percent.className = "bill-item__percent";

					control.append(slider, percent);
					item.append(row, control);

					const priority = getPlanPriority(entry.planName);
					const existingItems = Array.from(
						billList.querySelectorAll<HTMLLIElement>(".bill-item"),
					);
					const target = existingItems.find((existing) => {
						const existingPlan = existing.dataset.plan ?? "";
						const resolvedExistingPriority =
							getPlanPriority(existingPlan);
						const resolvedPriority = priority;
						return resolvedExistingPriority > resolvedPriority;
					});

					if (target) {
						billList.insertBefore(item, target);
					} else {
						billList.append(item);
					}

					slider.addEventListener("input", () => {
						const value = Number(slider.value);
						entry.percentage = value;
						percent.textContent = `${value}%`;
						name.textContent = `${entry.planName} (${formatFte(
							entry.percentage,
						)} FTE)`;
						price.textContent = `${formatCurrency(
							computeAdjustedAmount(entry),
						)}/month`;
						slider.setAttribute(
							"aria-valuetext",
							`${value}% utilization`,
						);
						updateTotal();
						updateButtonLabel(entry);
					});

					dom = {
						item,
						price,
						percent,
						slider,
						name,
					};

					entry.dom = dom;
				}

				if (dom) {
					dom.slider.value = entry.percentage.toString();
					dom.percent.textContent = `${entry.percentage}%`;
					dom.name.textContent = `${entry.planName} (${formatFte(
						entry.percentage,
					)} FTE)`;
					dom.price.textContent = `${formatCurrency(
						computeAdjustedAmount(entry),
					)}/month`;
					dom.slider.setAttribute(
						"aria-valuetext",
						`${entry.percentage}% utilization`,
					);
					updateButtonLabel(entry);
				}
			};

			selectButtons.forEach((button: FluentButtonElement) => {
				const planName = button.dataset.plan;
				const price = Number(button.dataset.price);

				if (!planName || Number.isNaN(price)) {
					return;
				}

				const card = button.closest(".pricing-card");
				const defaultLabel = button.textContent.trim();
				button.dataset.defaultLabel = defaultLabel;
				button.setAttribute("aria-pressed", "false");

				button.addEventListener("click", (event) => {
					event.preventDefault();

					const isSelected = button.dataset.selected === "true";

					if (isSelected) {
						const entry = selections.get(planName);
						if (entry?.dom?.item) {
							entry.dom.item.remove();
						}
						if (entry) {
							entry.dom = undefined;
							entry.button = undefined;
						}
						selections.delete(planName);
						button.dataset.selected = "false";
						button.textContent = defaultLabel;
						setBaseAppearance(
							button,
							button.dataset.initialAppearance,
						);
						button.setAttribute("aria-pressed", "false");
						card?.classList.remove("is-selected");
					} else {
						const entry: SelectionEntry = {
							planName,
							basePrice: price,
							percentage: 100,
							button,
						};
						selections.set(planName, entry);
						ensureBillItem(entry);
						button.dataset.selected = "true";
						updateButtonLabel(entry);
						setBaseAppearance(button, "accent");
						button.setAttribute("aria-pressed", "true");
						card?.classList.add("is-selected");
					}

					syncSummaryState();
					updateTotal();
				});
			});

			syncSummaryState();
			updateTotal();
		}
	}
</script>

<style>
	.pricing-section {
		display: flex;
		flex-direction: column;
		gap: var(--spacingVerticalXXL);
	}

	.pricing-grid {
		display: grid;
		grid-template-columns: repeat(3, minmax(0, 1fr));
		gap: var(--spacingHorizontalL);
	}

	.pricing-card {
		display: flex;
		flex-direction: column;
		gap: var(--spacingVerticalM);
		padding: var(--spacingVerticalXL) var(--spacingHorizontalL);
		border: 1px solid rgba(0, 103, 184, 0.12);
		box-shadow: 0 20px 40px rgba(15, 34, 58, 0.12);
		transition: box-shadow 0.25s ease;
	}

	.pricing-card:hover {
		border-color: var(--brand-accent);
		box-shadow: 0 28px 60px rgba(0, 46, 102, 0.22);
	}

	.price-display {
		display: inline-flex;
		align-items: baseline;
		gap: 0.35rem;
		font-family: var(--fontFamilyStrong);
	}

	.currency {
		font-size: 1.25rem;
		color: var(--text-muted);
	}

	.amount {
		font-size: 2.75rem;
		font-weight: 700;
		color: var(--text-strong);
		letter-spacing: -0.01em;
	}

	.term {
		font-size: 1rem;
		color: var(--text-muted);
	}

	.pricing-card ul {
		list-style: none;
		display: flex;
		flex-direction: column;
		gap: 0.75rem;
		padding: 0;
		margin: 0;
	}

	.pricing-card li {
		position: relative;
		padding-left: 1.75rem;
		color: var(--text-default);
	}

	.pricing-card li::before {
		content: "";
		position: absolute;
		left: 0;
		top: 0.4rem;
		width: 12px;
		height: 12px;
		border-radius: 50%;
		background: var(--brand-accent);
		box-shadow: 0 0 0 3px rgba(0, 103, 184, 0.16);
	}

	.pricing-card.is-selected {
		border-color: var(--brand-accent);
		box-shadow: 0 32px 72px rgba(0, 46, 102, 0.24);
	}

	.pricing-bill {
		display: flex;
		flex-direction: column;
		gap: 1rem;
		margin-top: var(--spacingVerticalXL, 3rem);
		padding: var(--spacingVerticalXL, 3rem)
			var(--spacingHorizontalL, 2.5rem);
		border: 1px solid rgba(0, 103, 184, 0.12);
		border-radius: var(--surfaceCornerRadius, 16px);
		background: var(--neutral-0, #ffffff);
		box-shadow: 0 24px 48px rgba(15, 34, 58, 0.1);
	}

	.bill-title {
		margin: 0;
	}

	.bill-description {
		margin: 0;
		color: var(--text-muted);
	}

	.bill-items {
		list-style: none;
		display: flex;
		flex-direction: column;
		gap: 0.75rem;
		padding: 0;
		margin: 0;
	}

	:global(.bill-item) {
		display: flex;
		flex-direction: column;
		gap: 0.75rem;
		padding-bottom: 0.75rem;
		border-bottom: 1px dashed rgba(0, 103, 184, 0.15);
		font-weight: 500;
	}

	:global(.bill-item:last-child) {
		border-bottom: none;
		padding-bottom: 0;
	}

	:global(.bill-item__row) {
		display: flex;
		align-items: center;
		justify-content: space-between;
		gap: 1.5rem;
	}

	:global(.bill-item__name) {
		min-width: 0;
		overflow: hidden;
		text-overflow: ellipsis;
		white-space: nowrap;
	}

	:global(.bill-item__price) {
		margin-left: auto;
		color: var(--text-strong);
		font-variant-numeric: tabular-nums;
		text-align: right;
	}

	:global(.bill-item__control) {
		display: flex;
		align-items: center;
		gap: 0.75rem;
		color: var(--text-muted);
		font-size: 0.875rem;
	}

	:global(.bill-item__slider) {
		flex: 1;
		min-width: 0;
		accent-color: var(--brand-accent);
	}

	:global(.bill-item__percent) {
		width: 3.5rem;
		text-align: right;
		font-variant-numeric: tabular-nums;
	}

	.bill-empty {
		margin: 0;
		color: var(--text-muted);
		font-style: italic;
	}

	.bill-total {
		display: flex;
		justify-content: space-between;
		align-items: center;
		font-weight: 600;
		font-size: 1.1rem;
		padding-top: 0.5rem;
		border-top: 1px solid rgba(0, 103, 184, 0.12);
	}

	.bill-total__amount {
		font-size: 1.25rem;
		color: var(--brand-accent);
	}

	.section-cta {
		display: flex;
		flex-wrap: wrap;
		gap: var(--spacingHorizontalS);
	}

	@media (max-width: 1024px) {
		.pricing-grid {
			grid-template-columns: repeat(2, minmax(0, 1fr));
		}
	}

	@media (max-width: 720px) {
		.pricing-grid {
			grid-template-columns: 1fr;
		}

		.pricing-card {
			padding: var(--spacingVerticalL) var(--spacingHorizontalM);
		}

		.section-cta {
			justify-content: center;
		}

		.pricing-bill {
			padding: var(--spacingVerticalL, 2rem)
				var(--spacingHorizontalM, 1.5rem);
		}
	}
</style>
