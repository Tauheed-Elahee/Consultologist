---

---

<section id="contact" class="page-section" data-background="light">
	<div class="container contact-section">
		<div class="section-header">
			<span class="section-eyebrow">Contact</span>
			<h2>Ready to transform your consult workflow?</h2>
			<p class="section-description">
				Share a sample consult scenario and we will craft a
				Microsoft-style experience tailored to your practiceâ€”complete
				with AI automation and security guidance.
			</p>
		</div>

		<fluent-card class="contact-card">
			<form class="contact-form" id="consultologist-form" novalidate>
				<label class="input-field">
					<span>Full name</span>
					<fluent-text-field
						id="contact-name"
						placeholder="Dr. Jane Smith"></fluent-text-field>
				</label>

				<label class="input-field">
					<span>Email</span>
					<fluent-text-field
						id="contact-email"
						type="email"
						placeholder="you@clinic.ca"></fluent-text-field>
				</label>

				<label class="input-field">
					<span>Specialty</span>
					<fluent-text-field
						id="contact-specialty"
						placeholder="Oncology, Rheumatology, etc."
					></fluent-text-field>
				</label>

				<label class="input-field">
					<span>Institution</span>
					<fluent-text-field
						id="contact-institution"
						placeholder="City Hospital"></fluent-text-field>
				</label>

				<label class="input-field">
					<span>Comments</span>
					<fluent-text-area
						id="contact-comments"
						placeholder="Share your consult goals, migration questions, or safeguards you need..."
						rows="6"></fluent-text-area>
				</label>

				<div class="form-actions">
					<fluent-button
						appearance="accent"
						type="submit"
						id="consultologist-send"
					>
						Send Email
					</fluent-button>
					<fluent-button
						appearance="outline"
						data-scroll-target="#pricing"
						href="/#pricing">View pricing</fluent-button
					>
				</div>

				<input
					type="hidden"
					id="contract-summary"
					name="contract-summary"
				/>
			</form>

			<div
				id="consultologist-response"
				class="response-card"
				aria-live="polite"
			>
			</div>
		</fluent-card>
	</div>
</section>

<style>
	.contact-section {
		display: flex;
		flex-direction: column;
		gap: var(--spacingVerticalXXL);
	}

	.contact-card {
		display: flex;
		flex-direction: column;
		gap: var(--spacingVerticalL);
		padding: var(--spacingVerticalXL) var(--spacingHorizontalL);
		width: min(820px, 100%);
		margin: 0 auto;
	}

	.contact-form {
		display: flex;
		flex-direction: column;
		gap: var(--spacingVerticalM);
	}

	.input-field {
		display: flex;
		flex-direction: column;
		gap: 0.5rem;
		font-size: 0.95rem;
		color: var(--text-muted);
	}

	.input-field fluent-text-field::part(control),
	.input-field fluent-text-area::part(control) {
		border-radius: var(--controlCornerRadius);
	}

	.form-actions {
		display: flex;
		flex-wrap: wrap;
		gap: var(--spacingHorizontalS);
	}

	.response-card {
		min-height: 140px;
		border: 1px dashed rgba(0, 103, 184, 0.2);
		border-radius: var(--surfaceCornerRadius);
		padding: var(--spacingVerticalM) var(--spacingHorizontalM);
		background: rgba(0, 103, 184, 0.04);
		color: var(--text-default);
	}

	.response-card .loading-message {
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 0.75rem;
	}

	.response-card .error-message {
		color: #a4262c;
		font-weight: 600;
	}

	.response-card .success-message {
		color: #107c10;
		font-weight: 600;
	}

	@media (max-width: 600px) {
		.contact-card {
			padding: var(--spacingVerticalL) var(--spacingHorizontalM);
		}

		.form-actions {
			flex-direction: column;
		}
	}
</style>

<script>
	const form = document.getElementById(
		"consultologist-form",
	) as HTMLFormElement | null;
	const sendButton = document.getElementById(
		"consultologist-send",
	) as HTMLButtonElement | null;
	const responseContainer = document.getElementById(
		"consultologist-response",
	) as HTMLElement | null;
	const contractField = document.getElementById(
		"contract-summary",
	) as HTMLInputElement | null;

	type ValueElement = HTMLElement & { value?: string | null };

	const getFieldValue = (id: string): string => {
		const element = document.getElementById(id) as ValueElement | null;
		if (!element) return "";
		return (element.value ?? "").toString().trim();
	};

	const clearFieldValue = (id: string): void => {
		const element = document.getElementById(id) as ValueElement | null;
		if (element && "value" in element) {
			element.value = "";
		}
	};

	const showResponse = (markup: string): void => {
		if (!responseContainer) return;
		responseContainer.innerHTML = markup;
	};

	const setLoadingState = (): void => {
		if (!sendButton) return;
		sendButton.setAttribute("disabled", "true");
		sendButton.textContent = "Sending...";
		showResponse(`
			<div class="loading-message">
				<fluent-progress-ring></fluent-progress-ring>
				<p>Connecting to Azure Communication Services...</p>
			</div>
		`);
	};

	const resetButtonState = (originalLabel: string): void => {
		if (!sendButton) return;
		sendButton.removeAttribute("disabled");
		sendButton.textContent = originalLabel;
	};

	form?.addEventListener("submit", async (event: SubmitEvent) => {
		event.preventDefault();

		const name = getFieldValue("contact-name");
		const email = getFieldValue("contact-email");
		const specialty = getFieldValue("contact-specialty");
		const organization = getFieldValue("contact-institution");
		const comments = getFieldValue("contact-comments");
		let contractSummary: unknown = null;

		if (contractField?.value) {
			try {
				contractSummary = JSON.parse(contractField.value);
			} catch {
				contractSummary = contractField.value;
			}
		}

		if (!name || !email || !specialty || !organization || !comments) {
			showResponse(`
				<div class="error-message">
					<p>Please complete all fields so we can route your request.</p>
				</div>
			`);
			return;
		}

		const originalLabel = sendButton?.textContent || "Send";
		setLoadingState();

		try {
			const response = await fetch("/api/contact", {
				method: "POST",
				headers: {
					"Content-Type": "application/json",
				},
				body: JSON.stringify({
					name,
					email,
					specialty,
					organization,
					comments,
					contract: contractSummary,
				}),
			});

			if (!response.ok) {
				throw new Error(`HTTP error! status: ${response.status}`);
			}

			const result = await response.json();
			showResponse(`
				<div class="success-message">
					<p>${result?.message || "Thanks! Your details were sent with Azure Communication Services."}</p>
				</div>
			`);

			form?.reset();
			[
				"contact-name",
				"contact-email",
				"contact-specialty",
				"contact-institution",
				"contact-comments",
			].forEach(clearFieldValue);
		} catch (error) {
			console.error("Error calling Consultologist API:", error);
			showResponse(`
				<div class="error-message">
					<h3>We ran into an issue</h3>
					<p>We could not reach Azure Communication Services. Please verify your configuration or email hello@consultologist.ai.</p>
				</div>
			`);
		} finally {
			resetButtonState(originalLabel);
		}
	});
</script>
